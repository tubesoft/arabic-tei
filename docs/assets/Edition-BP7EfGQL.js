import{u as T,p as d,q as D,s as z,f as g,a as l,c as i,w as o,v as B,m as X,o as s,x as m,y as k,g as S,z as v,A as M,B as N,F as _,r as $,C as I,e as h,t as b,D as F,n as V,E as O}from"./index-C36UFCKB.js";const G={__name:"Edition",props:{edList:Array},setup(L){const p=T(),C=d(p.global.name.value==="dark");D(()=>C.value,n=>{p.global.name.value=n?"dark":"light"});const f=z(V({template:"<div></div>"}));let y="",w="",r={};const x=d(!0),t=d(!1);async function q(){try{const e=await(await fetch("src/assets/tei/"+y+".xml")).text(),c=await(await fetch("src/assets/xslt/"+w+".sef.json")).text();try{const u={stylesheetText:c,sourceText:e,destination:"application"};r=(await SaxonJS.transform(u,"async")).principalResult}catch(u){throw console.error(u),new Error("ERROR in converting")}for(;r.querySelector("#vslot");)r.querySelector("#vslot").setAttribute("v-slot:activator","{ props }"),r.querySelector("#vslot").removeAttribute("id");for(;r.querySelector("#v-menu-config");)r.querySelector("#v-menu-config").setAttribute(":nudge-width","150"),r.querySelector("#v-menu-config").setAttribute(":close-on-content-click","false"),r.querySelector("#v-menu-config").removeAttribute("id");const R=new XMLSerializer().serializeToString(r).replaceAll("template-to-be","template");f.value=E(R)}catch(n){throw console.error(n),new Error("ERROR in rendering")}}function A(n,e){y=n,w=e,q()}function E(n){return V({components:{components:O},template:n})}return(n,e)=>(s(),g("div",null,[l(B,{modelValue:x.value,"onUpdate:modelValue":e[3]||(e[3]=a=>x.value=a),class:"sticky-menu",permanent:"",rail:t.value},{default:o(()=>[l(k,{"min-height":"60"},{append:o(()=>[t.value?m("",!0):(s(),i(S,{key:0,density:"compact",flat:"",icon:"mdi-chevron-left",onClick:e[1]||(e[1]=v(a=>t.value=!t.value,["stop"]))}))]),default:o(()=>[t.value?(s(),i(S,{key:0,class:"ml-1 mb-2",density:"compact",flat:"",icon:"mdi-chevron-right",onClick:e[0]||(e[0]=v(a=>t.value=!t.value,["stop"]))})):m("",!0)]),_:1}),l(M),t.value?m("",!0):(s(),i(N,{key:0,dense:""},{default:o(()=>[(s(!0),g(_,null,$(L.edList,a=>(s(),i(k,{key:a.title,disabled:t.value,link:"","prepend-icon":"mdi-book-open-variant",onClick:[c=>A(a.xml,a.xsl),e[2]||(e[2]=v(c=>t.value=!t.value,["stop"]))]},{default:o(()=>[l(I,null,{default:o(()=>[h(b(a.title),1)]),_:2},1024),l(F,null,{default:o(()=>[h(b(a.author),1)]),_:2},1024)]),_:2},1032,["disabled","onClick"]))),128))]),_:1}))]),_:1},8,["modelValue","rail"]),(s(),i(X(f.value)))]))}};export{G as default};
